CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT( MedV4D )

if(POLICY CMP0012)
	cmake_policy(SET CMP0012 NEW)
endif(POLICY CMP0012)
if(POLICY CMP0011)
	cmake_policy(SET CMP0011 NEW)
endif(POLICY CMP0011)

IF(NOT MEDV4D_CMAKE_SOURCE_DIR)
	SET(MEDV4D_CMAKE_SOURCE_DIR "${CMAKE_SOURCE_DIR}" )
	SET(MEDV4D_CMAKE_MODULES_DIR ${MEDV4D_CMAKE_SOURCE_DIR}/cmake_project/Modules)
	SET(CMAKE_MODULE_PATH "${MEDV4D_CMAKE_MODULES_DIR}" "${CMAKE_ROOT}/Modules" )
ENDIF(NOT MEDV4D_CMAKE_SOURCE_DIR)

IF(WIN32)
	IF( CMAKE_CL_64 )
		SET( ARCH_POSTFIX "w64" )
	ELSE( CMAKE_CL_64 )
		SET( ARCH_POSTFIX "w32" )
	ENDIF( CMAKE_CL_64 )
ELSE(WIN32)
	SET( ARCH_POSTFIX ${CMAKE_SYSTEM_PROCESSOR} )
ENDIF(WIN32)

SET( MEDV4D_DEBUG_POSTFIX "_${ARCH_POSTFIX}d" )
SET( MEDV4D_RELEASE_POSTFIX "_${ARCH_POSTFIX}" )
SET( MEDV4D_LIBRARY_PREFIX "M4D_" )
SET( MEDV4D_PLATFORM_LIBRARY_PREFIX "lib${MEDV4D_LIBRARY_PREFIX}" )

#MESSAGE( "+++

INCLUDE_DIRECTORIES( "${MEDV4D_CMAKE_SOURCE_DIR}/include" "${MEDV4D_CMAKE_SOURCE_DIR}/include/3rdParty" )
SET( CMAKE_LIBRARY_OUTPUT_DIRECTORY "${MEDV4D_CMAKE_SOURCE_DIR}/lib" )
SET( MEDV4D_GENERATED_HEADERS_DIR "${MEDV4D_CMAKE_SOURCE_DIR}/include/MedV4D/generated" )


INCLUDE( "${MEDV4D_CMAKE_MODULES_DIR}/StandardCompileOptions.cmake" )
INCLUDE( "${MEDV4D_CMAKE_MODULES_DIR}/FindPackages.cmake" )


ADD_SUBDIRECTORY( src/Common )
ADD_SUBDIRECTORY( src/Imaging )
ADD_SUBDIRECTORY( src/DICOMInterface )
ADD_SUBDIRECTORY( src/GUI )

ADD_SUBDIRECTORY( Applications/Viewer )
